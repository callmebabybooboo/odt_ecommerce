<div class="max-w-4xl mx-auto bg-white shadow p-6 rounded">
    <h1 class="text-2xl font-bold text-green-600 mb-4">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h1>

    <p class="text-gray-700 mb-2">‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç: <strong>#<%= @order.id %></strong></p>
    <p class="text-gray-700 mb-2">‡∏ú‡∏π‡πâ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠: <strong><%= @order.user.email %></strong></p>
    <p class="text-gray-700 mb-2">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠: <%= l(@order.created_at, format: :long) %></p>
    <p class="text-gray-700 mb-2">‡∏ß‡∏¥‡∏ò‡∏µ‡∏à‡∏±‡∏î‡∏™‡πà‡∏á: <%= @order.delivery_method %></p>
    <% if @order.delivery_method == "‡∏à‡∏±‡∏î‡∏™‡πà‡∏á" %>
        <p class="text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö: <%= @order.shipping_name %></p>
        <p class="text-gray-700 mb-2">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á: <%= @order.shipping_address %></p>
        <p class="text-gray-700 mb-2">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£: <%= @order.phone_number %></p>
    <% end %>
    <p class="text-gray-700 mb-2">‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô: <%= @order.payment_method %></p>
    <p class="text-gray-700 mb-2">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: <%= render_order_status(@order) %></p>


    <table class="w-full text-left mb-4">
        <thead>
            <tr class="border-b">
                <th class="py-2">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                <th class="py-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                <th class="py-2">‡∏£‡∏≤‡∏Ñ‡∏≤</th>
                <th class="py-2">‡∏£‡∏ß‡∏°</th>
            </tr>
        </thead>
        <tbody>
            <% if @order.order_items.present? %>
                <% @order.order_items.each do |item| %>
                    <tr class="border-b">
                        <td class="text-gray-700 py-2"><%= item.product.name %></td>
                        <td class="text-gray-700 py-2"><%= item.quantity %></td>
                        <td class="text-gray-700 py-2"><%= number_to_currency(item.price, unit: "‡∏ø") %></td>
                        <td class="text-gray-700 py-2"><%= number_to_currency(item.total_price, unit: "‡∏ø") %></td>
                    </tr>
                <% end %>
            <% else %>
                <p class="text-red-600">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ô‡∏µ‡πâ</p>
            <% end %>
        </tbody>
    </table>

    <div class="text-right font-bold text-lg">
        ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <%= number_to_currency(@order.total_price, unit: "‡∏ø") %>
    </div>

    <% if @order.pending? %>
        <div class="mt-6">
            <% if @order.payment_method == "‡πÇ‡∏≠‡∏ô" %>
                <h2 class="text-lg font-bold text-gray-800 mb-2">üì≤ ‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h2>
                <%= image_tag "QR-code.png", alt: "PromptPay QR", class: "w-100 h-100 mx-auto" %>

                <%= form_with model: @order, url: upload_slip_order_path(@order), local: true, html: { multipart: true }, class: "mt-4 space-y-4" do |f| %>
                    <div>
                        <%= f.label :payment_slip, "‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ", class: "block font-medium" %>
                        <%= f.file_field :payment_slip, class: "border rounded p-2 w-full" %>
                    </div>
                    <div class="flex justify-end gap-2">
                        <%= link_to "‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠", cancel_order_path(@order), method: :patch,
                            data: { turbo_method: :patch, confirm: "‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å?" },
                            class: "bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded" %>
                        <%= f.submit "‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô", class: "bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded" %>
                    </div>
                <% end %> 
            <% else %>
            <div class="text-right">
                <%= link_to "‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠", cancel_order_path(@order), method: :patch,
                    data: { turbo_method: :patch, confirm: "‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å?" },
                    class: "bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded" %>
            </div>
            <% end %>
        </div>
    <% end %>

</div>
