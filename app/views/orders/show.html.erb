<div class="max-w-4xl mx-auto bg-white shadow p-6 rounded">
    <h1 class="text-2xl font-bold text-green-600 mb-4">การสั่งซื้อสำเร็จ!</h1>

    <p class="text-gray-700 mb-2">ผู้สั่งซื้อ: <strong><%= @order.user.email %></strong></p>
    <p class="text-gray-700 mb-2">คำสั่งซื้อหมายเลข: <strong>#<%= @order.id %></strong></p>
    <p class="text-gray-700 mb-4">วันที่: <%= l(@order.created_at, format: :long) %></p>

    <table class="w-full text-left mb-4">
        <thead>
            <tr class="border-b">
                <th class="py-2">สินค้า</th>
                <th class="py-2">จำนวน</th>
                <th class="py-2">ราคา</th>
                <th class="py-2">รวม</th>
            </tr>
        </thead>
        <tbody>
            <% @order.order_items.each do |item| %>
                <tr class="border-b">
                <td class="py-2"><%= item.product.name %></td>
                <td class="py-2"><%= item.quantity %></td>
                <td class="py-2"><%= number_to_currency(item.price, unit: "฿") %></td>
                <td class="py-2"><%= number_to_currency(item.total_price, unit: "฿") %></td>
                </tr>
            <% end %>
        </tbody>
    </table>

    <div class="text-right font-bold text-lg">
        ยอดรวมทั้งหมด: <%= number_to_currency(@order.total_price, unit: "฿") %>
    </div>

    <div class="text-right">     
        <% if @order.pending? %>
        <%= button_to "ชำระเงิน", pay_order_path(@order), method: :patch,
                data: { turbo_method: :patch },
                class: "mt-6 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded" %>
        <% else %>
        <p class="mt-6 text-green-600 font-semibold">สถานะ: ชำระเงินแล้ว</p>
        <% end %>
    </div>
    <div class="mt-6 text-left">
        <%= link_to "< กลับไปหน้าหลัก", authenticated_root_path,
            class: "inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700" %>
    </div>
</div>
